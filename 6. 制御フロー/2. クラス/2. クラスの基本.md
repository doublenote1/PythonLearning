# クラスの作成・呼び出し

> クラスの定義
`class <クラス名>():
    <クラスブロック>`
> <クラス名>は、パスカルケースで表記
> クラス名後部の括弧(継承元を指定する時使用)は省略可能

「コンストラクタ」とは、
クラスブロックの中で`__init__()`という関数(初期化メソッド/特殊メソッド)を
定義している部分の事で、
インスタンス作成時に実行される。

「インスタンス変数」とは、
インスタンス作成時にコンストラクタ内で初期化される
インスタンス固有の変数(属性)の事で、
コンストラクタ内で初期化した後は、以降のコンストラクタブロック内からでも、
後述のインスタンスメソッド定義ブロック内からでも、
またはクラスブロック外からもアクセス可能となる

> 初期化(特殊)メソッド
`def __init__(self, <インスタンスから渡される引数をここで受け取る>, ...):
    self.<変数名> = <値>
    self.<関数名>()
    ...`
> `self`は、それぞれのインスタンス自身を意味する
> 初期化メソッドの第一引数には、必ず`self`を渡す
> インスタンスから渡された引数はここで受け取り、コンストラクタ内でのみアクセス可能
> `self.<変数名> = <式>`とする事で「インスタンス変数」を初期化する
> `self.<関数名>()`の形で後述するインスタンスメソッドへアクセス可能

> インスタンス作成
`インスタンス名 = <クラス名>(コンストラクタに渡す引数)`

```python
class Circle:
    def __init__(self, radius):
        print('初期化開始！')
        self.r = radius
        print(f'半径は{self.r}です')

print(type(Circle))  # -> <class 'type'>

"`インスタンス名 = クラス名(<引数>)`の形でインスタンス作成"
cir = Circle(10)
# -> 初期化開始！
# -> 半径は10です
print(type(cir))  # -> <class '__main__.Circle'>

"インスタンス変数へアクセス"
print(cir.r)  # -> 10
```

`Circle`クラスは、
コンストラクタの定義により位置引数`radius`を持つ様にしたので、
このクラスのインスタンスを作る時に
必ず`radius`の値を引数に渡す必要があります。

インスタンスを作成した後は、
クラスの外からでもインスタンス変数名にアクセス可能となる

# インスタンスメソッドの作成

「インスタンスメソッド」とはインスタンスやコンストラクタ、または他のインスタンスメソッド内から呼ばれた時に実行されるメソッドの事。
インスタンスメソッドも、クラスブロックの中で`def`文で定義する。

> インスタンスメソッド
`def <メソッド名>(self, <引数>):
    <メソッドブロック>`
> メソッドの第一引数には、必ず`self`を渡す
> 呼び出し側から引数を受け取り可能
> メソッドブロック内で、
  コンストラクタで生成されたインスタンス変数にアクセス可能
> メソッドブロック内から、
  他のインスタンスメソッドを呼び出し可能

以下のコードでは、円の面積を求める`area()`メソッドと、
円の外周の長さを求める`around()`メソッドを定義。

```python
class Circle:
    def __init__(self, radius):
        self.r = radius

    "円の面積を求める"
    def area(self):
        area = self.r * self.r * 3.14
        return f'{area:.2f}'

    "円の外周の長さを求める"
    def around(self):
        round = self.r * 2 * 3.14
        return f'{round:.2f}'

    def area_around(self):
        "他のインスタンスメソッドの呼び出し"
        area = self.area()
        around = self.around()
        return f'area={area}, around={around}'

cir1 = Circle(10)
cir2 = Circle(5)

print(cir1.area())  # -> 314.00
print(cir1.around())  # -> 62.80
print(cir1.area_around())  # -> area=314.00, around=62.80

print(cir2.area())  # -> 78.50
print(cir2.around())  # -> 31.40
print(cir2.area_around())  # -> area=78.50, around=31.40
```

# 継承

「継承」とは、既存のクラスを引き継いで、別のクラスを作ることを言う。

> 子クラスの定義
`class <子クラス名>(<親クラス名>):`
> 親クラスを継承して作った子クラスでは、
  親クラスの特殊メソッドやインスタンスメソッドをそのまま使うことができる

以下のコードでは`Circle`クラスを継承して`SubCircle`クラスを作り、
初期化メソッドを上書きし、
円錐の体積を求めるインスタンスメソッド`volume()`を追加しています。

```python
class Circle:
    def __init__(self, radius):
        self.r = radius

    def area(self):
        area = self.r * self.r * 3.14
        return f'{area:.2f}'

    def around(self):
        round = self.r * 2 * 3.14
        return f'{round:.2f}'

class SubCircle(Circle):  # ←Circleクラスを継承
    def __init__(self, radius, height):  # ←特殊メソッドを上書き
        # super().__init__(radius)
        self.r = radius
        self.h = height

    def volume(self):  # ←インスタンスメソッドを追加
        volume = 1/3 * self.r * self.r * 3.14 * self.h
        return f'{volume:.2f}'

cir3 = SubCircle(5, 10)

# 親クラスで定義されているメソッド
print(cir3.area())  # -> 78.50

# 親クラスで定義されているメソッド
print(cir3.around())  # -> 31.40

# 子クラスで定義したメソッド
print(cir3.volume())  # -> 261.67
```

特殊メソッドを上書きして、属性に`height`(高さ)を追加しているので、
`SubCircle`クラスのインスタンスを作るには、引数を2つ指定します。

メソッドは、親クラスで定義されているものはそのまま使えますし、
子クラスで新たに定義した円錐の体積を求めるメソッドも使えます。

なお子クラスで上書きしたり、
新たに追加したりしたメソッドは親クラスには影響しません。

# リンク

[headboost.jp](https://www.headboost.jp/python-class/)
