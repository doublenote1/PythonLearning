# エスケープシーケンス

`\\`         : '\' 文字そのもの
`\'`         : シングルクオーテーション
`\"`         : ダブルクオーテーション
`\a`         : ベル
`\b`         : バックスペース
`\f`         : 改ページ
`\r`         : キャリッジリターン
`\n`         : 改行
`\t`         : 水平タブ
`\v`         : 垂直タブ
`\N{name}`   : Unicode データベース中で名前 name を持つ文字
`\uxxxx`     : 16ビットの16進数値xxxxを持つUnicode文字
`\Uxxxxxxxx` : 32ビットの16進数値xxxxxxxxを持つUnicode文字
`\ooo`       : 8進数oooを持つASCII文字
`\xhh`       : 16進数hhを持つASCII文字
`\0`         : NULL

```python

print('a\tb\nA\tB\n\\')
# -> a	b
# -> A	B 
# -> \
```

## raw文字列

> 文字列リテラルの前に`r`または`R`をつけると、
  エスケープシーケンスを展開せずそのままの値が文字列となる

```python
# 通常文字列
print('C:\\some\\name\\test')
# raw文字列
print(r'C:\some\name\test')
```

> 末尾に奇数個の`\`を表現したい場合
```python
print(r'C:\some\name\test' + '\\')
print('C:\\some\\name\\test\\')

"エラーになる"
print(r'C:\some\name\test\')
# -> SyntaxError: EOL while scanning string literal
```

# コード上、長い行を複数に分ける

## 括弧を使わない方法

> 行末の`\`でその後の改行が無視される
```python
n = 1 + 2 \
    + 3
print(n)  # -> 6
```

> 連続した文字列リテラルは連結される
```python
s = 'Py' 'thon'
print(s)  # -> Python
```

> 上記の法則の組み合わせ
```python
s = 'abc' \
    'efg' \
    'hij'
print(s)  # -> abcefghij
```

## 括弧を使う方法

> 括弧内はトークン間以外なら `\` が無くても自由に改行可能

```python
x = ('abc '
     'あいう')
print(x)  # -> abc あいう

x = (1 + 2
     + 3)
print(x)  # -> 6
```

# 改行を含む文字列の取得

## コード上のインデントが不要

> 三連引用符を使う
```python
s = '''\
Line1
    Line2
        Line3
'''
print(s)
# -> Line1
# ->    Line2
# ->        Line3
```

## コード上でもインデントを加える

1. `\n`と行末の`\`の併用
```python
s = 'Line1\n' \
    '   Line2\n' \
    '       Line3'
print(s)
# -> Line1
# -> Line2
# -> Line3
```

2. 括弧と`\n`の併用
```python
s = (
    'Line1\n'
    '   Line2\n'
    '       Line3'
)
print(s)
# -> Line1
# -> Line2
# -> Line3
```

# 文字列とリストの相互変換

## 文字列をリストへ分割

### 1. 指定区切り文字列で分割

`list型 = 対象文字列.split(sep=None, maxsplit=-1)`
> 文字列を「区切り文字列(sep)」で区切った、単語のリストを返す
> 「区切り文字列(sep)」を省略すると、空白文字列で区切る
> 最大「maxsplit」回分割される

```python
"「空白文字列」で分割"
print('one two     three\nfour\tfive'.split())
# -> ['one', 'two', 'three', 'four', 'five']

"「指定文字列」で分割"
print('one, two, three, four, five'.split(', '))
# -> ['one', 'two', 'three', 'four', 'five']

"「最大分割数を指定」"
print('one, two, three, four, five'.split(', ', 2))
# -> ['one', 'two', 'three, four, five']
```

### 2. 改行で分割

`list型 = 対象文字列.splitlines([keepends])`
> 文字列を改行部分で分解し、各行からなるリストを返します
> 「keepends」に`True`が与えらない限り、返されるリストに改行は含まれない

```python
"`\n`、`\r\n`、`\r`が混在して、末尾にも改行文字がある文字列"
s_lines_multi = '1 one\n2 two\r\n3 three\r4 four\n'
print(s_lines_multi)
# -> 1 one
# -> 2 two
# -> 3 three
# -> 4 four

"split()をデフォルトで適用すると改行文字だけでなくスペースでも分割される"
print(s_lines_multi.split())
# -> ['1', 'one', '2', 'two', '3', 'three', '4', 'four']

"""引数`sep`には単独の改行文字しか指定できないので、
改行文字が混在していると対応できない
また末尾の改行文字でも分割される"""
print(s_lines_multi.split('\n'))
# -> ['1 one', '2 two\r', '3 three\r4 four', '']

"`splitlines()`だと、各種の改行文字で分割するが、ほかの空白文字では分割しない"
print(s_lines_multi.splitlines())
# -> ['1 one', '2 two', '3 three', '4 four']

"第一引数`keepends`を`True`とすると結果に行末の改行文字を含む"
print(s_lines_multi.splitlines(True))
# -> ['1 one\n', '2 two\r\n', '3 three\r', '4 four\n']
```

### 3. 正規表現で分割

`import re
list型 = re.split(pattern, string, maxsplit=0, flags=0)`
> 「string」を、出現した「pattern」で分割する
> 「pattern」中でキャプチャの丸括弧が使われていれば、
  パターン中の全てのグループのテキストも結果のリストの一部として返される
> 「maxsplit」が`0`でなければ、分割は最大「maxsplit」回起こり、
  残りの文字列はリストの最終要素として返されます。

```python
import re
s = 'one  two  ,: three-four::: five'
print(re.split(r'\W+', s))
# -> ['one', 'two', 'three', 'four', 'five']

"最大分割数を指定"
print(re.split(r'\W+', s, 2))
# -> ['one', 'two', 'three-four::: five']
```

### 4. 区切った要素を加工しながら分割

`str型 = 対象文字列.strip([chars])`
> 文字列の先頭および末尾部分を「chars」で除去したコピーを返す
> 「chars」省略時は空白文字が除去される

1. 余分な文字列の除去
```python
s = ' one ,, two::,::three--,--,four,,'
"除外文字"
e = ' :-'

"""リスト内包表記を使用
区切った要素の左右の余分な文字を x.strip() で削除し、
リストの要素に追加する時、内容のない物は除外(if文)"""
print([x.strip(e) for x in s.split(',') if not x.strip(e) == ''])
# -> ['one', 'two', 'three', 'four']
```

2. 数値へ変換
```python
s = '1, 2, 3, 4'
print([int(x.strip()) for x in s.split(',')])
# -> [1, 2, 3, 4]
```

## リストを文字列へ連結

`str型 = 置き換える区切り文字列.join(iterable)`
> 「iterable」中の文字列要素を結合した文字列を返す
> 「iterable」に「bytes」オブジェクトのような非文字列の値が存在するなら、
  「TypeError」が送出される
> 要素間のセパレータは、このメソッドを提供する文字列です

```python
lst = ['one', 'two', 'three']
print(', '.join(lst))  # -> one, two, three
print('\n'.join(lst))
# -> one
# -> two
# -> three
```

> 文字列の区切り文字を変換・整形する方法
```python
s = 'one, two,  three'
print('-'.join([x.strip() for x in s.split(',')]))
# one-two-three
```

## n番目の区切り文字以降(以前)を削除

`list型 = 対象文字列.rsplit(sep=None, maxsplit=-1)`
> 右から分割していくことを除けば、`split()`と同様に振る舞う

```python
s = 'one,two,three,four'

"n番目の区切り文字以前を削除"
print(s.split(',', 1)[-1])  # -> two,three,four
print(s.split(',', 2)[-1])  # -> three,four
print(s.split(',', 3)[-1])  # -> four

"後ろからn番目の区切り文字以降を削除"
print(s.rsplit(',', 1)[0])  # -> one,two,three
print(s.rsplit(',', 2)[0])  # -> one,two
print(s.rsplit(',', 3)[0])  # -> one
```

